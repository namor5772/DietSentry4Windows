<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="DietSentry.HelpPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Help">

    <Grid>
        <ScrollView x:Name="HelpScrollView">
            <VerticalStackLayout Padding="20" Spacing="12">
            <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8">
                <Button
                    Text="?"
                    Style="{StaticResource HelpIconButtonStyle}"
                    Clicked="OnHelpClicked" />
                <Label
                    Grid.Column="1"
                    Text="Help"
                    FontSize="24"
                    FontAttributes="Bold"
                    VerticalOptions="Center" />
            </Grid>

            <Label
                x:Name="HelpOverviewSection"
                Text="Using help"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Tap the ? button on any screen to see quick guidance and jump to the relevant section here." />

            <Label
                x:Name="FoodsTableSection"
                Text="Foods table"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Browse the foods list, switch nutrition modes, and use the top buttons to add items or move between tables." />

            <Label
                x:Name="NutritionModesSection"
                Text="Nutrition modes"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Min shows only the most important columns, NIP focuses on key fields, and All shows every nutrient column available." />

            <Label
                x:Name="FiltersSection"
                Text="Filtering foods"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Type part of a food name and press Enter to filter the list. Clear removes the filter." />

            <Label
                x:Name="EatenTableSection"
                Text="Eaten table"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="View logged foods, switch nutrition detail, and filter by date or daily totals." />

            <Label
                x:Name="WeightTableSection"
                Text="Weight table"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Track weight entries over time and manage selections from the panel below the list." />

            <Label
                x:Name="AddFoodsSection"
                Text="Adding foods"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Use Add Solid, Add Liquid, or Add Recipe to create new items. JSON lets you paste structured data quickly." />

            <Label
                x:Name="AddSolidSection"
                Text="Add solid food"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Enter nutrition values per 100g and confirm to create the item." />

            <Label
                x:Name="AddLiquidSection"
                Text="Add liquid food"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Enter nutrition values per 100mL and confirm to create the item." />

            <Label
                x:Name="AddRecipeSection"
                Text="Add recipe"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Set a description, add ingredients, and confirm to save the recipe." />

            <Label
                x:Name="AddJsonSection"
                Text="Add food using JSON"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Paste JSON that matches the food fields and confirm to add it to the database." />

            <Label
                x:Name="EditFoodSection"
                Text="Edit food"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Update the food details and confirm to save changes." />

            <Label
                x:Name="EditRecipeSection"
                Text="Edit recipe"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Update the recipe details and confirm to save changes." />

            <Label
                x:Name="CopyFoodSection"
                Text="Copy food"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Provide a new description and confirm to save a copied food item." />

            <Label
                x:Name="CopyRecipeSection"
                Text="Copy recipe"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Provide a new description and confirm to save a copied recipe." />

            <Label
                x:Name="ImportExportSection"
                Text="Import and export"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Export db saves the database file to your exchange directory. Import db replaces the local database with the exported file." />

            <Label
                x:Name="LoggingSection"
                Text="Logging food"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="Select a food and use Log to record an amount with date and time. Recent entries show in the Eaten Table." />

            <Label
                x:Name="PaletteSection"
                Text="Palette"
                FontAttributes="Bold"
                FontSize="18" />
            <Label
                Text="View the app color palette and swatches for reference." />
            </VerticalStackLayout>
        </ScrollView>

        <Grid
            x:Name="HelpOverlay"
            IsVisible="False"
            BackgroundColor="#80000000"
            RowDefinitions="*,Auto">
            <BoxView
                Grid.Row="0"
                BackgroundColor="Transparent">
                <BoxView.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHelpDismissed" />
                </BoxView.GestureRecognizers>
            </BoxView>
            <Border
                x:Name="HelpSheet"
                Grid.Row="1"
                BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray950}}"
                Padding="20,16"
                StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16,16,0,0" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="12">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label
                            Text="Using help"
                            FontAttributes="Bold"
                            FontSize="18"
                            VerticalOptions="Center" />
                        <Button
                            Grid.Column="1"
                            Text="Close"
                            Clicked="OnHelpDismissed"
                            Padding="6,2"
                            FontSize="12"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
                    </Grid>
                    <Label
                        Text="Each screen has a ? button next to the title. Tap it for quick tips and a jump into the relevant section here."
                        LineBreakMode="WordWrap" />
                    <Button
                        Text="Open Full Help"
                        Clicked="OnHelpOpenFullClicked" />
                </VerticalStackLayout>
            </Border>
        </Grid>
    </Grid>
</ContentPage>
