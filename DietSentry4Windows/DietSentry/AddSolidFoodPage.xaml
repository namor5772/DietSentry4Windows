<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:DietSentry"
             x:Class="DietSentry.AddSolidFoodPage">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style
                x:Key="TopRowButtonStyle"
                TargetType="Button">
                <Setter
                    Property="Margin"
                    Value="0,0,4,4" />
                <Setter
                    Property="WidthRequest"
                    Value="{OnPlatform Android=89.6, Default=112}" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid>
        <Grid
            Padding="20"
            RowDefinitions="Auto,Auto,*"
            RowSpacing="12">
            <Grid
                Grid.Row="0"
                ColumnDefinitions="Auto,Auto,*"
                ColumnSpacing="12">
                <Button
                    Grid.Column="0"
                    Text="?"
                    Style="{StaticResource HelpIconButtonStyle}"
                    Clicked="OnHelpClicked"
                    VerticalOptions="Start" />
                <Label
                    Grid.Column="1"
                    Text="{Binding ScreenTitle}"
                    FontAttributes="Bold"
                    FontSize="24"
                    VerticalOptions="Start" />
                <FlexLayout
                    Grid.Column="2"
                    Direction="Row"
                    Wrap="Wrap"
                    AlignItems="Start"
                    JustifyContent="Start">
                    <Button
                        Text="Foods Table"
                        BackgroundColor="{StaticResource PrimaryDark}"
                        TextColor="{StaticResource White}"
                        Clicked="OnBackClicked"
                        Style="{StaticResource TopRowButtonStyle}" />
                    <Button
                        Text="Confirm"
                        Clicked="OnConfirmClicked"
                        Style="{StaticResource TopRowButtonStyle}" />
                </FlexLayout>
            </Grid>

            <Label
                Grid.Row="1"
                Text="Solid food (per 100g)"
                FontAttributes="Bold" />

            <ScrollView
                Grid.Row="2">
                <Grid
                    ColumnDefinitions="Auto,*"
                    ColumnSpacing="12"
                    RowSpacing="6"
                    RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                <Label
                    Grid.Row="0"
                    Grid.Column="0"
                    Text="Description"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="DescriptionEntry"
                    Grid.Row="0"
                    Grid.Column="1"
                    Placeholder="Food description" />

                <Label
                    Grid.Row="1"
                    Grid.Column="0"
                    Text="Energy (kJ)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="EnergyEntry"
                    Grid.Row="1"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="2"
                    Grid.Column="0"
                    Text="Protein (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="ProteinEntry"
                    Grid.Row="2"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="3"
                    Grid.Column="0"
                    Text="Fat, Total (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="FatTotalEntry"
                    Grid.Row="3"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="4"
                    Grid.Column="0"
                    Text="- Saturated (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="SaturatedFatEntry"
                    Grid.Row="4"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="5"
                    Grid.Column="0"
                    Text="- Trans (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="TransFatEntry"
                    Grid.Row="5"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="6"
                    Grid.Column="0"
                    Text="- Polyunsaturated (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="PolyunsaturatedFatEntry"
                    Grid.Row="6"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="7"
                    Grid.Column="0"
                    Text="- Monounsaturated (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="MonounsaturatedFatEntry"
                    Grid.Row="7"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="8"
                    Grid.Column="0"
                    Text="Carbohydrate (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="CarbohydrateEntry"
                    Grid.Row="8"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="9"
                    Grid.Column="0"
                    Text="- Sugars (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="SugarsEntry"
                    Grid.Row="9"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="10"
                    Grid.Column="0"
                    Text="Dietary Fibre (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="DietaryFibreEntry"
                    Grid.Row="10"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="11"
                    Grid.Column="0"
                    Text="Sodium (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="SodiumEntry"
                    Grid.Row="11"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="12"
                    Grid.Column="0"
                    Text="Calcium (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="CalciumEntry"
                    Grid.Row="12"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="13"
                    Grid.Column="0"
                    Text="Potassium (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="PotassiumEntry"
                    Grid.Row="13"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="14"
                    Grid.Column="0"
                    Text="Thiamin B1 (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="ThiaminB1Entry"
                    Grid.Row="14"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="15"
                    Grid.Column="0"
                    Text="Riboflavin B2 (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="RiboflavinB2Entry"
                    Grid.Row="15"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="16"
                    Grid.Column="0"
                    Text="Niacin B3 (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="NiacinB3Entry"
                    Grid.Row="16"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="17"
                    Grid.Column="0"
                    Text="Folate (ug)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="FolateEntry"
                    Grid.Row="17"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="18"
                    Grid.Column="0"
                    Text="Iron (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="IronEntry"
                    Grid.Row="18"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="19"
                    Grid.Column="0"
                    Text="Magnesium (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="MagnesiumEntry"
                    Grid.Row="19"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="20"
                    Grid.Column="0"
                    Text="Vitamin C (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="VitaminCEntry"
                    Grid.Row="20"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="21"
                    Grid.Column="0"
                    Text="Caffeine (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="CaffeineEntry"
                    Grid.Row="21"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="22"
                    Grid.Column="0"
                    Text="Cholesterol (mg)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="CholesterolEntry"
                    Grid.Row="22"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="23"
                    Grid.Column="0"
                    Text="Alcohol (g)"
                    VerticalOptions="Center" />
                <Entry
                    x:Name="AlcoholEntry"
                    Grid.Row="23"
                    Grid.Column="1"
                    Keyboard="Numeric" />

                <Label
                    Grid.Row="24"
                    Grid.Column="0"
                    Text="Notes"
                    VerticalOptions="Start" />
                <Editor
                    x:Name="NotesEditor"
                    Grid.Row="24"
                    Grid.Column="1"
                    AutoSize="TextChanges" />
                </Grid>
            </ScrollView>
        </Grid>

        <Grid
            x:Name="MissingDescriptionOverlay"
            IsVisible="False">
            <BoxView Color="#80000000">
                <BoxView.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnMissingDescriptionBackdropTapped" />
                </BoxView.GestureRecognizers>
            </BoxView>
            <Frame
                Padding="16"
                CornerRadius="12"
                BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                WidthRequest="320"
                HasShadow="True">
                <Frame.Shadow>
                    <Shadow
                        Brush="#40000000"
                        Offset="0,8"
                        Radius="12"
                        Opacity="0.6" />
                </Frame.Shadow>
                <VerticalStackLayout Spacing="12">
                    <Label
                        Text="Missing description"
                        FontAttributes="Bold"
                        FontSize="18"
                        HorizontalTextAlignment="Center" />
                    <Label
                        x:Name="MissingDescriptionMessageLabel"
                        HorizontalTextAlignment="Center" />
                    <FlexLayout
                        Direction="Row"
                        Wrap="Wrap"
                        AlignItems="Center"
                        JustifyContent="Center">
                        <Button
                            Text="OK"
                            Clicked="OnMissingDescriptionOkClicked"
                            Margin="0,0,4,4" />
                    </FlexLayout>
                </VerticalStackLayout>
            </Frame>
        </Grid>

        <Grid
            x:Name="InvalidValueOverlay"
            IsVisible="False">
            <BoxView Color="#80000000">
                <BoxView.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnInvalidValueBackdropTapped" />
                </BoxView.GestureRecognizers>
            </BoxView>
            <Frame
                Padding="16"
                CornerRadius="12"
                BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray900}}"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                WidthRequest="320"
                HasShadow="True">
                <Frame.Shadow>
                    <Shadow
                        Brush="#40000000"
                        Offset="0,8"
                        Radius="12"
                        Opacity="0.6" />
                </Frame.Shadow>
                <VerticalStackLayout Spacing="12">
                    <Label
                        Text="Invalid value"
                        FontAttributes="Bold"
                        FontSize="18"
                        HorizontalTextAlignment="Center" />
                    <Label
                        x:Name="InvalidValueMessageLabel"
                        HorizontalTextAlignment="Center" />
                    <FlexLayout
                        Direction="Row"
                        Wrap="Wrap"
                        AlignItems="Center"
                        JustifyContent="Center">
                        <Button
                            Text="OK"
                            Clicked="OnInvalidValueOkClicked"
                            Margin="0,0,4,4" />
                    </FlexLayout>
                </VerticalStackLayout>
            </Frame>
        </Grid>

        <Grid
            x:Name="HelpOverlay"
            IsVisible="False"
            BackgroundColor="#80000000"
            RowDefinitions="*,Auto">
            <BoxView
                Grid.Row="0"
                BackgroundColor="Transparent">
                <BoxView.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnHelpDismissed" />
                </BoxView.GestureRecognizers>
            </BoxView>
            <Border
                x:Name="HelpSheet"
                Grid.Row="1"
                BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Gray950}}"
                Padding="20,16"
                StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16,16,0,0" />
                </Border.StrokeShape>
                <Grid RowDefinitions="Auto,*" RowSpacing="12">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label
                            x:Name="HelpTitleLabel"
                            FontAttributes="Bold"
                            FontSize="18"
                            VerticalOptions="Center" />
                        <Button
                            Grid.Column="1"
                            Text="Close"
                            Clicked="OnHelpDismissed"
                            Padding="6,2"
                            FontSize="12"
                            BackgroundColor="Transparent"
                            TextColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource White}}" />
                    </Grid>
                    <local:MarkdownView
                        x:Name="HelpBodyView"
                        Grid.Row="1"
                        VerticalOptions="FillAndExpand" />
                </Grid>
            </Border>
        </Grid>
    </Grid>

</ContentPage>
